(window.webpackJsonpCoveoForSitecore=window.webpackJsonpCoveoForSitecore||[]).push([[5],{18:function(e,t,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),s=o(1),c=o(5),l=function(e){function t(o,n,i){var c=e.call(this,o,t.ID,i)||this;return c.element=o,c.options=n,c.bindings=i,c.options=r.ComponentOptions.initComponentOptions(o,t,n),c.bind.onRootElement(s.SitecoreContextEvents.onSitecoreContextInitialization,c.afterComponentsInitialization),c}return i(t,e),t.prototype.afterComponentsInitialization=function(e){var t=this;this.root.dataset.coveoForSitecoreEventRegistered||(this.root.dataset.coveoForSitecoreEventRegistered="true",this.bind.onRootElement(r.QueryEvents.buildingQuery,function(o){t.onBuildingQuery(o,e)}))},t.prototype.onBuildingQuery=function(e,t){var o=this.triggerBuildingSitecoreExternalContent(),n=this.triggerBuildingLocalSitecoreInstanceEvent(),i=new r.ExpressionBuilder;n.expression.isEmpty()||i.add(n.expression.build()),o.sources.length>0&&i.addFieldExpression("@source","==",o.sources),o.collections.length>0&&i.addFieldExpression("@collection","==",o.collections),i.isEmpty()||e.queryBuilder.constantExpression.add(i.build(" OR "));var s=new r.ExpressionBuilder;s.addFieldExpression("@source","==",[t.indexSourceName].concat(o.sources)),o.collections.length>0&&s.addFieldExpression("@collection","==",o.collections),e.queryBuilder.advancedExpression.add(s.build(" OR "))},t.prototype.triggerBuildingSitecoreExternalContent=function(){var e={sources:[],collections:[]};return this.bind.trigger(this.element,c.SitecoreExpressionEvents.onBuildingSitecoreExternalContent,e),{sources:this.filterUnique(e.sources),collections:this.filterUnique(e.collections)}},t.prototype.triggerBuildingLocalSitecoreInstanceEvent=function(){var e={expression:new r.ExpressionBuilder};return this.bind.trigger(this.element,c.SitecoreExpressionEvents.onBuildingLocalSitecoreInstanceExpression,e),e},t.prototype.filterUnique=function(e){return e.filter(function(e,t,o){return o.indexOf(e)===t})},t.ID="ForSitecoreExpressions",t.options={},t}(r.Component);t.CoveoForSitecoreExpressions=l,r.Initialization.registerAutoCreateComponent(l)}}]);
//# sourceMappingURL=CoveoForSitecoreExpressions.min.js.map